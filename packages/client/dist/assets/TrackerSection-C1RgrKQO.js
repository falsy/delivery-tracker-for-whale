import{j as e,c as o,C as S,r as p,L as O,u as N,a as B,b as Y}from"./index-MtD7AM1c.js";function T(){let r="",t=0,s;for(;t<arguments.length;)(s=arguments[t++])&&typeof s=="string"&&(r&&(r+=" "),r+=s);return r}function J({label:r,changeLabel:t}){return e.jsx("div",{className:o({display:"flex"}),children:e.jsx("input",{className:o({flex:1,lineHeight:"20px",width:"100%",fontSize:"14px",padding:"5px",border:0,background:"transparent","&::placeholder":{fontSize:"13px"},"@media (prefers-color-scheme: dark)":{color:"#fff"}}),type:"text",value:r,onChange:s=>t(s.target.value),placeholder:"배송에 대한 간단한 메모를 적을 수 있어요."})})}function Q({handleClick:r}){return e.jsx("button",{"aria-label":"delete-button",className:T("delete-button",o({width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center","& > svg":{width:"18px",height:"18px","@media (prefers-color-scheme: dark)":{stroke:"#fff"}}})),onClick:r,children:e.jsx(S,{})})}function V(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})}function X({carriers:r,carrier:t,changeCarrierId:s}){const l=p.useRef(null),a=p.useRef(null),[i,n]=p.useState(!1),x=async d=>{n(!1),l!=null&&l.current&&l.current.focus(),s(d)},g=d=>{if(!i)return;const h=a.current.querySelectorAll('[role="menuitem"]'),f=Array.from(h).indexOf(document.activeElement);if(d.key==="ArrowDown"){d.preventDefault();const u=(f+1)%h.length;h[u].focus()}else if(d.key==="ArrowUp"){d.preventDefault();const u=(f-1+h.length)%h.length;h[u].focus()}else d.key==="Escape"&&n(!1)};return p.useEffect(()=>{var d;if(i&&t&&(a!=null&&a.current)){const h=a.current.querySelectorAll('[role="menuitem"]'),f=r.findIndex(j=>j.id===t.id);(d=h[f===-1?0:f])==null||d.focus()}},[i,t]),e.jsxs("div",{className:o({position:"relative",paddingBottom:"10px"}),children:[e.jsxs("button",{ref:l,"aria-expanded":i,"aria-controls":"carrier-select-box",className:o({margin:0,lineHeight:"40px",padding:"0 15px",border:"1px solid #ddd",display:"block",width:"100%",fontSize:"15px",fontWeight:500,background:"transparent",textAlign:"left","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)",color:"#fff"}}),onClick:()=>n(d=>!d),children:[t.displayName,e.jsx("div",{className:o({position:"absolute",right:"15px",top:"13px",lineHeight:0,"& > svg":{width:"16px",height:"auto"}}),children:e.jsx(V,{})})]}),i&&e.jsxs("div",{children:[e.jsx("div",{className:o({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:50}),onClick:()=>n(!1)}),e.jsx("div",{id:"carrier-select-box",className:o({position:"absolute",width:"100%",padding:0,lineHeight:"38px",border:"1px solid #ddd",borderRadius:"6px",marginTop:"4px",background:"#f9f9f9",zIndex:100,maxHeight:"240px",overflowY:"scroll",borderBottom:"1px solid #ddd",boxShadow:"0 1px 12px rgba(0, 0, 0, 0.2)","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)",color:"#fff"}}),children:e.jsx("ul",{role:"menu",ref:a,onKeyDown:g,children:r.map(d=>e.jsx("li",{className:o({padding:"1px 1px",borderBottom:"1px solid #ddd",cursor:"pointer",fontSize:"13px","&:hover":{background:"#fff"},"&:last-child":{borderBottom:0},"@media (prefers-color-scheme: dark)":{background:"rgb(55, 55, 55)",borderColor:"rgb(85, 85, 85)","&:hover":{background:"rgb(65, 65, 65)"}}}),children:e.jsx("button",{role:"menuitem",className:o({display:"block",width:"100%",border:0,background:"transparent",padding:"0 14px",textAlign:"left",lineHeight:"38px","@media (prefers-color-scheme: dark)":{color:"#fff"}}),onClick:()=>x(d.id),children:d.displayName})},d.id))})})]})]})}function Z({carrier:r,trackingNumber:t}){const s=()=>{const{popupURL:l}=r;window.open(l+t,"","resizable=yes,scrollbars=yes,width=720,height=600")};return e.jsx("button",{className:o({width:"30%",minWidth:"60px",lineHeight:"40px",background:"#f5f5f5",border:"1px solid #ddd",borderRight:0,borderTopColor:"rgb(220, 220, 220)",borderBottomColor:"rgb(220, 220, 220)",textShadow:"none",color:"#000",fontWeight:500,"&:last-of-type":{borderRight:"1px solid rgb(220, 220, 220)"},transition:"all 0.3s",_hover:{background:"#eaeaea",opacity:.8},"@media (prefers-color-scheme: dark)":{background:"rgb(44, 44, 44)",color:"#ddd",borderColor:"rgb(85, 85, 85)",borderRight:0,borderTopColor:"rgb(50, 50, 50)",borderBottomColor:"rgb(50, 50, 50)","&:last-of-type":{borderRight:"1px solid rgb(50, 50, 50)"},_hover:{background:"rgb(30, 30, 30)"}}}),onClick:s,children:"새창"})}function $({handleClick:r}){return e.jsx("button",{"aria-label":"submit-button",className:o({lineHeight:"40px",padding:0,background:"#087e5b",border:"1px solid #087e5b",color:"#fff",width:"30%",minWidth:"60px",fontSize:14,cursor:"pointer",textShadow:"0px 0px 1px #075c43",letterSpacing:"1px",fontWeight:700,transition:"all 0.3s",_hover:{opacity:.8}}),onClick:r,children:"조회"})}function ee({carrier:r,trackingNumber:t,changeTrackingNumber:s,getDelivery:l}){return e.jsxs("div",{className:o({paddingBottom:"10px",display:"flex"}),children:[e.jsx("input",{className:o({flexGrow:1,width:"100%",lineHeight:"24px",margin:0,padding:"0 15px",border:"1px solid #ddd",borderRight:0,fontSize:"15px",fontWeight:500,letterSpacing:.3,"&::placeholder":{fontSize:"13px"},"@media (prefers-color-scheme: dark)":{background:"rgb(55, 55, 55)",borderColor:"rgb(85, 85, 85)",color:"#fff"}}),type:"text",value:t,onChange:a=>s(a.target.value),placeholder:"운송장 번호를 입력해주세요."}),r.isPopupEnabled&&e.jsx(Z,{carrier:r,trackingNumber:t}),r.isCrawlable&&e.jsx($,{handleClick:()=>l(r.id,t)})]})}function C({children:r}){return e.jsx("table",{className:o({tableLayout:"fixed",width:"100%",textAlign:"center",borderRight:"1px solid #ddd",borderBottom:"1px solid #ddd",borderSpacing:0,fontSize:"13px","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)",color:"#fff"},"& th, & td":{borderLeft:"1px solid #ddd",borderTop:"1px solid #ddd","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)"}},"& th":{background:"#f5f5f5",lineHeight:"34px","&:first-of-type":{width:"35%"},"@media (prefers-color-scheme: dark)":{background:"rgb(44, 44, 44)"}},"& td":{lineHeight:"20px",padding:"5px","& p":{margin:"5px 0"}}}),children:r})}function re({isLoading:r,errDeliveryMessage:t,deliveryState:s,progresses:l,closeFnc:a}){return e.jsxs("div",{className:o({borderTop:"1px solid #eee",padding:"20px 0","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)"}}),children:[e.jsxs("div",{className:o({height:200,overflow:"auto",padding:"0 15px 0 0",position:"relative"}),children:[r&&e.jsx("div",{className:o({position:"sticky",top:0}),children:e.jsx("div",{className:o({position:"absolute",width:"100%"}),children:e.jsx(O,{})})}),!!t&&e.jsx("p",{className:o({padding:"0 2px",color:"#bbb",fontSize:"13px","@media (prefers-color-scheme: dark)":{color:"#ddd"}}),children:t}),l.length>0&&!t&&e.jsxs("div",{children:[e.jsx("div",{className:o({marginBottom:"20px"}),children:e.jsxs(C,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"발송지"}),e.jsx("th",{children:"도착지"}),e.jsx("th",{children:"배달결과"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:s.from}),e.jsx("td",{children:s.to}),e.jsx("td",{children:s.state})]})})]})}),e.jsxs(C,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"단계/시간"}),e.jsx("th",{children:"위치/현황"})]})}),e.jsx("tbody",{children:l.map((i,n)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("p",{children:["[",i.state.name,"]"]}),e.jsx("p",{children:i.time})]}),e.jsxs("td",{children:[e.jsxs("p",{children:["[",i.location,"]"]}),e.jsx("p",{children:i.description})]})]},n))})]})]})]}),e.jsx("button",{className:o({margin:"20px auto 0",display:"block",textAlign:"center",width:"100%",fontSize:"12px",lineHeight:"36px",padding:0,background:"#f5f5f5",border:"1px solid #ddd","@media (prefers-color-scheme: dark)":{background:"rgb(44, 44, 44)",color:"#ddd",borderColor:"rgb(85, 85, 85)"}}),onClick:a,children:"닫기"})]})}function oe(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}function te({memos:r,changeMemo:t}){const s=async(i,n)=>{const x=r.map(d=>d),g=i.target.value;x[n]=g,t(x)},l=async()=>{t([...r,""])},a=async i=>{const n=r.filter((x,g)=>g!==i);t(n)};return e.jsxs("div",{className:o({paddingBottom:"15px"}),children:[e.jsx("div",{children:e.jsxs("button",{id:"create-memo-button",className:o({display:"flex",lineHeight:"20px",gap:"3px",padding:"0 2px 2px 0",fontSize:"12px",color:"#087e5b",fontWeight:"bold","@media (prefers-color-scheme: dark)":{color:"#05c38b"},"& > svg":{marginTop:"2px",width:"16px",height:"auto",cursor:"pointer",stroke:"#087e5b","@media (prefers-color-scheme: dark)":{stroke:"#05c38b"}}}),onClick:()=>l(),children:[e.jsx(oe,{})," 메모 추가"]})}),r.length>0&&e.jsx("div",{children:e.jsx("ul",{id:"memo-list",children:r.map((i,n)=>e.jsx("li",{children:e.jsxs("div",{className:o({display:"grid",gridTemplateColumns:"1fr 24px",gap:"5px",padding:"1px"}),children:[e.jsx("input",{className:o({flexGrow:1,lineHeight:"20px",width:"100%",fontSize:"13px",padding:"2px 5px",border:0,background:"transparent","@media (prefers-color-scheme: dark)":{color:"#bbb"}}),type:"text",value:i,onChange:x=>{s(x,n)},onBlur:x=>{s(x,n)},placeholder:"이곳에 추가적인 메모를 입력할 수 있어요."}),e.jsx("button",{"aria-label":"delete-memo-button",className:T("delete-memo-button",o({display:"flex",alignItems:"center",justifyContent:"center","& > svg":{opacity:.5},"@media (prefers-color-scheme: dark)":{"& > svg":{stroke:"#eee"}}})),onClick:()=>a(n),children:e.jsx(S,{})})]})},n))})})]})}function ne({tracker:r,deleteTracker:t}){const{controllers:s}=N(),{setMessage:l}=B(),{carriers:a}=Y(),[i,n]=p.useState(!1),[x,g]=p.useState(""),[d,h]=p.useState(r.label),[f,u]=p.useState(r.trackingNumber),[j,I]=p.useState(r.carrierId||a[0].id),[z,D]=p.useState(r.memos),[k,w]=p.useState(null),[H,v]=p.useState([]),y=a.find(c=>c.id===j),L=c=>{h(c),b({label:c})},E=c=>{I(c),b({carrierId:c})},W=c=>{u(c),b({trackingNumber:c})},A=c=>{D(c),b({memos:c})},M=()=>{g(""),w(null),v([])},R=async(c,m)=>{if(m==="")return;g(""),n(!0);const{isError:_,message:P,data:q}=await s.tracker.getDelivery(c,m);if(_){n(!1),g(P);return}const{from:G,to:K,progresses:U,state:F}=q;w({from:G.name,to:K.name,state:F.name}),v(U),n(!1)},b=p.useCallback(async c=>{const{isError:m}=await s.tracker.patchTracker(r.id,c);m&&l("자동 저장에 실패하였습니다.")},[]);return e.jsxs("div",{className:o({position:"relative",padding:"10px 20px 0",marginBottom:"20px",background:"#fff",boxShadow:"1px 1px 4px rgba(0, 0, 0, 0.1)","@media (prefers-color-scheme: dark)":{background:"rgb(55, 55, 55)"}}),children:[e.jsxs("div",{className:o({display:"grid",gridTemplateColumns:"1fr 30px",gap:"10px",padding:"5px 0 10px"}),children:[e.jsx(J,{label:d,changeLabel:L}),e.jsx(Q,{handleClick:()=>t(r.id)})]}),e.jsx(X,{carriers:a,carrier:y,changeCarrierId:E}),e.jsx(ee,{carrier:y,trackingNumber:f,changeTrackingNumber:W,getDelivery:R}),(i||k!==null||x!=="")&&e.jsx(re,{isLoading:i,errDeliveryMessage:x,deliveryState:k,progresses:H,closeFnc:M}),e.jsx(te,{memos:z,changeMemo:A})]})}function se({text:r,handleClick:t,id:s}){return e.jsx("button",{id:s,className:o({display:"inline-block",width:"80px",fontSize:"14px",lineHeight:"32px",color:"#fff",background:"#087e5b",border:"1px solid #087e5b",textShadow:"0px 0px 1px #075c43",letterSpacing:1,fontWeight:700,opacity:1,transition:"opacity",transitionDuration:"0.3s",_hover:{opacity:.8}}),onClick:t,children:r})}function de({trackers:r,getTrackers:t}){const{controllers:s}=N(),{setMessage:l}=B(),a=async()=>{const{isError:n}=await s.tracker.addTracker();if(n){l();return}t()},i=async n=>{if(!window.confirm("조회 정보를 삭제하시겠습니까?"))return;const{isError:x}=await s.tracker.deleteTracker(n);if(x){l();return}t()};return e.jsxs("section",{children:[e.jsx("div",{className:o({padding:"20px 20px 0"}),children:r.length>0&&e.jsx("ul",{id:"tracker-list",children:r.map(n=>e.jsx("li",{children:e.jsx(ne,{tracker:n,deleteTracker:i},n.id)},n.id))})}),e.jsx("div",{className:o({padding:"0 20px 40px"}),children:e.jsx(se,{id:"create-tracker-button",text:"추가",handleClick:a})})]})}export{de as default};
