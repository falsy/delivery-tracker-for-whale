import{j as e,c as o,C as S,r as x,u as q,a as N}from"./index-Dgai3gjh.js";function T(){let r="",t=0,n;for(;t<arguments.length;)(n=arguments[t++])&&typeof n=="string"&&(r&&(r+=" "),r+=n);return r}function G({label:r,changeLabel:t}){return e.jsx("div",{className:o({display:"flex"}),children:e.jsx("input",{className:o({flex:1,lineHeight:"20px",width:"100%",fontSize:"14px",padding:"5px",border:0,background:"transparent","&::placeholder":{fontSize:"13px"},"@media (prefers-color-scheme: dark)":{color:"#fff"}}),type:"text",value:r,onChange:n=>t(n.target.value),placeholder:"배송에 대한 간단한 메모를 적을 수 있어요."})})}function K({handleClick:r}){return e.jsx("button",{"aria-label":"delete-button",className:T("delete-button",o({width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center","& > svg":{width:"18px",height:"18px","@media (prefers-color-scheme: dark)":{stroke:"#fff"}}})),onClick:r,children:e.jsx(S,{})})}function U(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})}function F({carriers:r,carrier:t,changeCarrierId:n}){const d=x.useRef(null),a=x.useRef(null),[i,c]=x.useState(!1),p=async s=>{c(!1),d!=null&&d.current&&d.current.focus(),n(s)},g=s=>{if(!i)return;const h=a.current.querySelectorAll('[role="menuitem"]'),f=Array.from(h).indexOf(document.activeElement);if(s.key==="ArrowDown"){s.preventDefault();const u=(f+1)%h.length;h[u].focus()}else if(s.key==="ArrowUp"){s.preventDefault();const u=(f-1+h.length)%h.length;h[u].focus()}else s.key==="Escape"&&c(!1)};return x.useEffect(()=>{var s;if(i&&t&&(a!=null&&a.current)){const h=a.current.querySelectorAll('[role="menuitem"]'),f=r.findIndex(j=>j.id===t.id);(s=h[f===-1?0:f])==null||s.focus()}},[i,t]),e.jsxs("div",{className:o({position:"relative",paddingBottom:"10px"}),children:[e.jsxs("button",{ref:d,"aria-expanded":i,"aria-controls":"carrier-select-box",className:o({margin:0,lineHeight:"40px",padding:"0 15px",border:"1px solid #ddd",display:"block",width:"100%",fontSize:"15px",fontWeight:500,background:"transparent",textAlign:"left","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)",color:"#fff"}}),onClick:()=>c(s=>!s),children:[t.displayName,e.jsx("div",{className:o({position:"absolute",right:"15px",top:"13px",lineHeight:0,"& > svg":{width:"16px",height:"auto"}}),children:e.jsx(U,{})})]}),i&&e.jsxs("div",{children:[e.jsx("div",{className:o({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:50}),onClick:()=>c(!1)}),e.jsx("div",{id:"carrier-select-box",className:o({position:"absolute",width:"100%",padding:0,lineHeight:"38px",border:"1px solid #ddd",borderRadius:"6px",marginTop:"4px",background:"#f9f9f9",zIndex:100,maxHeight:"240px",overflowY:"scroll",borderBottom:"1px solid #ddd",boxShadow:"0 1px 12px rgba(0, 0, 0, 0.2)","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)",color:"#fff"}}),children:e.jsx("ul",{role:"menu",ref:a,onKeyDown:g,children:r.map(s=>e.jsx("li",{className:o({padding:"1px 1px",borderBottom:"1px solid #ddd",cursor:"pointer",fontSize:"13px","&:hover":{background:"#fff"},"&:last-child":{borderBottom:0},"@media (prefers-color-scheme: dark)":{background:"rgb(55, 55, 55)",borderColor:"rgb(85, 85, 85)","&:hover":{background:"rgb(65, 65, 65)"}}}),children:e.jsx("button",{role:"menuitem",className:o({display:"block",width:"100%",border:0,background:"transparent",padding:"0 14px",textAlign:"left",lineHeight:"38px","@media (prefers-color-scheme: dark)":{color:"#fff"}}),onClick:()=>p(s.id),children:s.displayName})},s.id))})})]})]})}function O({carrier:r,trackingNumber:t}){const n=()=>{const{popupURL:d}=r;window.open(d+t,"","resizable=yes,scrollbars=yes,width=900,height=700")};return e.jsx("button",{className:o({width:"30%",minWidth:"60px",lineHeight:"40px",background:"#f5f5f5",border:"1px solid #ddd",borderRight:0,borderTopColor:"rgb(220, 220, 220)",borderBottomColor:"rgb(220, 220, 220)",textShadow:"none",color:"#000",fontWeight:500,"&:last-of-type":{borderRight:"1px solid rgb(220, 220, 220)"},transition:"all 0.3s",_hover:{background:"#eaeaea",opacity:.8},"@media (prefers-color-scheme: dark)":{background:"rgb(44, 44, 44)",color:"#ddd",borderColor:"rgb(85, 85, 85)",borderRight:0,borderTopColor:"rgb(50, 50, 50)",borderBottomColor:"rgb(50, 50, 50)","&:last-of-type":{borderRight:"1px solid rgb(50, 50, 50)"},_hover:{background:"rgb(30, 30, 30)"}}}),onClick:n,children:"새창"})}function Y({handleClick:r}){return e.jsx("button",{"aria-label":"submit-button",className:o({lineHeight:"40px",padding:0,background:"#087e5b",border:"1px solid #087e5b",color:"#fff",width:"30%",minWidth:"60px",fontSize:14,cursor:"pointer",textShadow:"0px 0px 1px #075c43",letterSpacing:"1px",fontWeight:700,transition:"all 0.3s",_hover:{opacity:.8}}),onClick:r,children:"조회"})}function J({carrier:r,trackingNumber:t,changeTrackingNumber:n,getDelivery:d}){return e.jsxs("div",{className:o({paddingBottom:"10px",display:"flex"}),children:[e.jsx("input",{className:o({flexGrow:1,width:"100%",lineHeight:"24px",margin:0,padding:"0 15px",border:"1px solid #ddd",borderRight:0,fontSize:"15px",fontWeight:500,letterSpacing:.3,"&::placeholder":{fontSize:"13px"},"@media (prefers-color-scheme: dark)":{background:"rgb(55, 55, 55)",borderColor:"rgb(85, 85, 85)",color:"#fff"}}),type:"text",value:t,onChange:a=>n(a.target.value),placeholder:"운송장 번호를 입력해주세요."}),r.isPopupEnabled&&e.jsx(O,{carrier:r,trackingNumber:t}),r.isCrawlable&&e.jsx(Y,{handleClick:()=>d(r,t)})]})}function Q(){return e.jsx("div",{className:o({height:200,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",textIndent:-9999,fontSize:0,_after:{content:'""',display:"inline-block",width:"40px",height:"40px",border:"3px solid rgba(255, 255, 255, 0)",borderRadius:"50%",borderTopColor:"#087e5b",borderLeftColor:"#087e5b",animation:"spin 0.85s ease-in-out infinite"}}),children:"loading..."})}function C({children:r}){return e.jsx("table",{className:o({tableLayout:"fixed",width:"100%",textAlign:"center",borderRight:"1px solid #ddd",borderBottom:"1px solid #ddd",borderSpacing:0,fontSize:"13px","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)",color:"#fff"},"& th, & td":{borderLeft:"1px solid #ddd",borderTop:"1px solid #ddd","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)"}},"& th":{background:"#f5f5f5",lineHeight:"34px","&:first-of-type":{width:"35%"},"@media (prefers-color-scheme: dark)":{background:"rgb(44, 44, 44)"}},"& td":{lineHeight:"20px",padding:"5px","& p":{margin:"5px 0"}}}),children:r})}function V({isPending:r,errDeliveryMessage:t,deliveryState:n,progresses:d,closeFnc:a}){return e.jsxs("div",{className:o({borderTop:"1px solid #eee",padding:"20px 0","@media (prefers-color-scheme: dark)":{borderColor:"rgb(85, 85, 85)"}}),children:[e.jsxs("div",{className:o({height:200,overflow:"auto",padding:"0 15px 0 0",position:"relative"}),children:[r&&e.jsx("div",{className:o({position:"sticky",top:0}),children:e.jsx("div",{className:o({position:"absolute",width:"100%"}),children:e.jsx(Q,{})})}),!!t&&e.jsx("p",{className:o({padding:"0 2px",color:"#bbb",fontSize:"13px","@media (prefers-color-scheme: dark)":{color:"#ddd"}}),children:t}),d.length>0&&!t&&e.jsxs("div",{className:o({opacity:r?0:1,transition:"opacity",transitionDuration:"0.15s"}),children:[e.jsx("div",{className:o({marginBottom:"20px"}),children:e.jsxs(C,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"발송지"}),e.jsx("th",{children:"도착지"}),e.jsx("th",{children:"배달결과"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:n.from}),e.jsx("td",{children:n.to}),e.jsx("td",{children:n.state})]})})]})}),e.jsxs(C,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"단계/시간"}),e.jsx("th",{children:"위치/현황"})]})}),e.jsx("tbody",{children:d.map((i,c)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("p",{children:["[",i.state.name,"]"]}),e.jsx("p",{children:i.time})]}),e.jsxs("td",{children:[e.jsxs("p",{children:["[",i.location,"]"]}),e.jsx("p",{children:i.description})]})]},c))})]})]})]}),e.jsx("button",{className:o({margin:"20px auto 0",display:"block",textAlign:"center",width:"100%",fontSize:"12px",lineHeight:"36px",padding:0,background:"#f5f5f5",border:"1px solid #ddd","@media (prefers-color-scheme: dark)":{background:"rgb(44, 44, 44)",color:"#ddd",borderColor:"rgb(85, 85, 85)"}}),onClick:a,children:"닫기"})]})}function X(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}function Z({memos:r,changeMemo:t}){const n=async(i,c)=>{const p=r.map(s=>s),g=i.target.value;p[c]=g,t(p)},d=async()=>{t([...r,""])},a=async i=>{const c=r.filter((p,g)=>g!==i);t(c)};return e.jsxs("div",{className:o({paddingBottom:"15px"}),children:[e.jsx("div",{children:e.jsxs("button",{id:"create-memo-button",className:o({display:"flex",lineHeight:"20px",gap:"3px",padding:"0 2px 2px 0",fontSize:"12px",color:"#087e5b",fontWeight:"bold","@media (prefers-color-scheme: dark)":{color:"#05c38b"},"& > svg":{marginTop:"2px",width:"16px",height:"auto",cursor:"pointer",stroke:"#087e5b","@media (prefers-color-scheme: dark)":{stroke:"#05c38b"}}}),onClick:()=>d(),children:[e.jsx(X,{})," 메모 추가"]})}),r.length>0&&e.jsx("div",{children:e.jsx("ul",{id:"memo-list",children:r.map((i,c)=>e.jsx("li",{children:e.jsxs("div",{className:o({display:"grid",gridTemplateColumns:"1fr 24px",gap:"5px",padding:"1px"}),children:[e.jsx("input",{className:o({flexGrow:1,lineHeight:"20px",width:"100%",fontSize:"13px",padding:"2px 5px",border:0,background:"transparent","@media (prefers-color-scheme: dark)":{color:"#bbb"}}),type:"text",value:i,onChange:p=>{n(p,c)},onBlur:p=>{n(p,c)},placeholder:"이곳에 추가적인 메모를 입력할 수 있어요."}),e.jsx("button",{"aria-label":"delete-memo-button",className:T("delete-memo-button",o({display:"flex",alignItems:"center",justifyContent:"center","& > svg":{opacity:.5},"@media (prefers-color-scheme: dark)":{"& > svg":{stroke:"#eee"}}})),onClick:()=>a(c),children:e.jsx(S,{})})]})},c))})})]})}function $({tracker:r,deleteTracker:t}){const{carriers:n}=q(),{isPending:d,delivery:a,patchTracker:i,deliveryErrorMessage:c,getDelivery:p,clearDelivery:g}=N(),s=r.carrierId||n[0].id,[h,f]=x.useState(r.label),[u,j]=x.useState(r.trackingNumber),[B,I]=x.useState(s),[z,D]=x.useState(r.memos),[k,y]=x.useState(null),[H,v]=x.useState([]),w=n.find(l=>l.id===B);x.useEffect(()=>{if(!a){y(null),v([]);return}const{from:l,to:m,progresses:_,state:P}=a;y({from:l.name,to:m.name,state:P.name}),v(_)},[a]);const L=l=>{f(l),b({label:l})},W=l=>{I(l),b({carrierId:l})},A=l=>{j(l),b({trackingNumber:l})},R=l=>{D(l),b({memos:l})},b=async l=>{i(r.id,l)},E=()=>{g()},M=async(l,m)=>{m!==""&&p(l,m)};return e.jsxs("div",{className:o({position:"relative",padding:"10px 20px 0",marginBottom:"20px",background:"#fff",boxShadow:"1px 1px 4px rgba(0, 0, 0, 0.1)","@media (prefers-color-scheme: dark)":{background:"rgb(55, 55, 55)"}}),children:[e.jsxs("div",{className:o({display:"grid",gridTemplateColumns:"1fr 30px",gap:"10px",padding:"5px 0 10px"}),children:[e.jsx(G,{label:h,changeLabel:L}),e.jsx(K,{handleClick:()=>t(r.id)})]}),e.jsx(F,{carriers:n,carrier:w,changeCarrierId:W}),e.jsx(J,{carrier:w,trackingNumber:u,changeTrackingNumber:A,getDelivery:M}),(d||k!==null||c!=="")&&e.jsx(V,{isPending:d,errDeliveryMessage:c,deliveryState:k,progresses:H,closeFnc:E}),e.jsx(Z,{memos:z,changeMemo:R})]})}function ee({text:r,handleClick:t,id:n}){return e.jsx("button",{id:n,className:o({display:"inline-block",width:"80px",fontSize:"14px",lineHeight:"32px",color:"#fff",background:"#087e5b",border:"1px solid #087e5b",textShadow:"0px 0px 1px #075c43",letterSpacing:1,fontWeight:700,opacity:1,transition:"opacity",transitionDuration:"0.3s",_hover:{opacity:.8}}),onClick:t,children:r})}function oe(){const{trackers:r,createTracker:t,deleteTracker:n}=N(),d=async()=>{t()},a=async i=>{n(i)};return e.jsxs("section",{children:[e.jsx("div",{className:o({padding:"20px 20px 0"}),children:r.length>0&&e.jsx("ul",{id:"tracker-list",children:r.map(i=>e.jsx("li",{children:e.jsx($,{tracker:i,deleteTracker:a},i.id)},i.id))})}),e.jsx("div",{className:o({padding:"0 20px 40px"}),children:e.jsx(ee,{id:"create-tracker-button",text:"추가",handleClick:d})})]})}export{oe as default};
